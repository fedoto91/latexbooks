\documentclass{minimal}
\usepackage[a4paper,margin=1cm,landscape]{geometry}
\usepackage{tikz}
\usetikzlibrary{calc,shapes,shadows,shapes.multipart,chains,matrix,positioning,arrows.meta,arrows,
graphs,graphdrawing}
\usegdlibrary{layered}
\usepackage{xparse}% http://ctan.org/pkg/xparse
\usepackage{etoolbox}% http://ctan.org/pkg/etoolbox
\usepackage{ifthen}
\errorcontextlines 10000
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\DeclareListParser{\ListParsecomma}{,}
\DeclareListParser{\ListParsesemi}{;}
\DeclareListParser{\ListParsecolon}{:}
\newcounter{cnt}
\newcounter{xcnt}
\newcounter{ycnt}
%%%%%Semi colon parser %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\def\ygetarray#1{%
\pgfmathsetmacro{\ylenarray}{0}% 

\foreach \i in {#1}{%
\pgfmathtruncatemacro{\ylenarray}{\ylenarray+1}% 
\global\let\ylenarray\ylenarray
}%
\pgfmathsetmacro{\ylenminus}{0}%
\pgfmathtruncatemacro{\ylenminus}{\ylenarray-1}%  
\global\let\ylenminus\ylenminus

\setcounter{ycnt}{0}
\newcommand\ysetval[2]{%
  \csdef{list##1}{##2}}
\newcommand\yaddval[1]{%
  \stepcounter{ycnt}%
  \csdef{list\theycnt}{##1}}
\newcommand\ygetval[1]{%
  \csuse{list##1}}
  
  \renewcommand{\do}[1]{\yaddval{##1}}
  \expandafter\expandafter\expandafter\ListParsesemi\expandafter\expandafter\expandafter{#1}
}
%%%%%% colon parser %%%%%%%%%%%%
\def\xgetarray#1{%
\pgfmathsetmacro{\xlenarray}{0}% 
 
\foreach \i in {#1}{%
\pgfmathtruncatemacro{\xlenarray}{\xlenarray+1}% 
\global\let\xlenarray\xlenarray
}%
\pgfmathsetmacro{\xlenminus}{0}%
\pgfmathtruncatemacro{\xlenminus}{\xlenarray-1}%  
\global\let\xlenminus\xlenminus

\setcounter{xcnt}{0}
\newcommand\xsetval[2]{%
  \csdef{list##1}{##2}}
\newcommand\xaddval[1]{%
  \stepcounter{xcnt}%
  \csdef{list\thexcnt}{##1}}
\newcommand\xgetval[1]{%
  \csuse{list##1}}
  
  \renewcommand{\do}[1]{\xaddval{##1}}
  \expandafter\expandafter\expandafter\ListParsecolon\expandafter\expandafter\expandafter{#1}
}
%%%%%%%%% comma parser %%%%%%%%%%%%%%%%%%%
\def\getarray#1{%
\pgfmathsetmacro{\lenarray}{0}% 

\foreach \i in {#1}{%
\pgfmathtruncatemacro{\lenarray}{\lenarray+1}% 
\global\let\lenarray\lenarray
}%
\pgfmathsetmacro{\lenminus}{0}%
\pgfmathtruncatemacro{\lenminus}{\lenarray-1}%  
\global\let\lenminus\lenminus

\setcounter{cnt}{0}
\newcommand\setval[2]{%
  \csdef{list##1}{##2}}
\newcommand\addval[1]{%
  \stepcounter{cnt}%
  \csdef{list\thecnt}{##1}}
\newcommand\getval[1]{%
  \csuse{list##1}}
  
  \renewcommand{\do}[1]{\addval{##1}}
  \expandafter\expandafter\expandafter\ListParsecomma\expandafter\expandafter\expandafter{#1}
}
\begin{document}
\newcommand\hashmapset[2]{
\begin{tikzpicture}[remember picture,
  inner/.style={rectangle,draw=blue!50,fill=blue!20,thick,inner sep=3pt},
  outer/.style={draw=green,fill=green!20,thick,inner sep=10pt}
  ]
  \getarray{#2}
  \def\length{\lenarray}
  %%construct Hashmap
  \node[outer,draw=green] (#1) {#1
    
    \nodepart{two}
    \begin{tikzpicture}
    
    \begin{scope}[start chain=1 going below]
    \foreach \i in {1,...,\length}{ 
      \node [inner,draw=blue, on chain=1] (bk\i)  {};
      \node [inner,draw=blue,right=of bk\i] (bv\i) {};
    }
    \end{scope}
      
    \end{tikzpicture}
    }
 %% Place key value pairs
    \foreach \j [count \c from 1] in {#2}{
    \getarray{\j}
     \node [inner,draw=green,left= 4cm of bk\c] (key\c)  {\getval{1}};
     \node [inner,draw=green,right= 4cm of bv\c] (val\c)  {\getval{2}};
      }
      
 %%connect nodes
 \foreach \k in {1,...,\length}{
 	\path (bk\k) edge (key\k)
          (bv\k) edge (val\k);
 }
\end{tikzpicture}
}
\end{document}
